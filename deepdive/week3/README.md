# ORM (Object Relational Mapping)
- 객체 지향 프로그래밍 언어의 __객체(Object)__ 와 관계형 데이터베이스(RDBMS)의 __테이블(Relational)__ 을
  자동으로 __연결(Mapping)__ 해주는 기술

객체지향언어란
- 현실 세계의 '객체'를 모델링하여 데이터(속성)와 기능을 함께 묶어 상호작용하게 만드는 프로그래밍 방식(자바, c++ 등) 

- 객체 : 객체란 물리적으로 존재하거나 추상적으로 생각할 수 있는 것들 중 자신의 속성을 가지고 있으면서 식별 가능한 것을 의미
  예시 사진


---

## 관계형 데이터베이스(RDBMS)
__데이터베이스(DB)__ : 체계적으로 정리된 데이터의 집합 그 자체를 의미
ex) "국립 도서관"에 잘 분류되어 꽂혀있는 "수백만 권의 책들"그 자체


__DBMS(Database Management System)__ : 데이터 베이스를 효율적으로 관리하고 운영하는 소프트웨어.
ex) 도서관의 사서 또는 도서 관리 시스템과 같은 역할 
우리는 사서에게(DBMS)에게 " 이 책을 찾아주세요(요청)"라고 말하고, 사서가 서고(DB)에 가서 책을 찾아다 줌


__관게형 데이터베이스 관리 시스템(RDBMS__-Relational Database Management System)
- 모든 데이터를 엑셀 시트처럼 행과 열로 구성된 테이블(표) 형식으로 저장하고 관리하는 소프트웨어
- 데이터를 미리 정해진 규칙(표)에 맞춰 체계적으로 저장하는 방식의 표준(ex: MYSQL, Oracle 등)
- 열(Column)은 데이터의 '속성'을 정의. EX) 이름, 나이, 주소
- 행(Row)은 실제'데이터'의 한 단위를 의미


__RDBMS에서 관계형(Relational)의 진짜 의미__
-'관계형'이라는 이름의 핵심은 데이터 중복을 피하기 위해 여러 테이블로 분리된 데이터를 '키(Key)'라는 연결고리를 사용해 서로 '관계'를 맺어준다는데 있다


EX) 회원정보와 그 회원이 주문한 정보를 표에 저장한다고 가정

|회원ID|회원이름|회원주소|주문상품|주문수량|
|----|----|----|----|----|
|1001|김개발|서울|노트북|1|
|1001|김개발|서울|모니터|2|


같은사람이 두 번 주문을 함으로써 이름과 주소가 불필요하게 중복저장됨
만약 이사를 가면 이 모든 행의 주소를 다 바꿔야함


__이런 경우 RDBMS의 해결방법__

테이블을 회원,주문 이렇게 두 개의 주제로 분리
회원ID를 키(key)로 설정하고 분류한 두 테이블을 연결


회원 테이블
|회원ID|회원이름|회원주소|
|----|----|----|
|1001|김개발|서울|

주문 테이블
|주문ID|주문상품|주문수량|회원ID|
|----|----|----|----|
|5001|노트북|1|1001|
|5002|모니터|2|1001|


__ACID__ : RDBMS가 수십 년간 금융, 결제, 예약 시스템 등 신뢰성이 중요한 모든 분야에서 표준으로사용된 이유
ACID라는 4가지 특징을 통해 데이터의 일관성과 안정성을 강력하게 보장하기 때문

- Atomicity(원자성) : 작업이 '모두 성공'하거나 '모두 실패'하도록 보장함
- Consistency(일관성) : 데이터는 항상 유효한 규칙(예 : 잔액은 마이너스가 될 수 없다)을 지켜야 함
- Isolation(고립성) : 여러 작업이 동시에 진행될 때, 서로에게 영향을 주지 않도록 함
- Durability(지속성) : 일단 성공한 작업은 서버가 다운 되어도 영구적으로 기록됨


이 ACID원칙은 '트랜잭션'이라는 중요한 개념과 연결됨
트랜잭션 : 논리적인 작업 단위/ 논리적인 이유로 여러 SQL문들을 단일 작업으로 묶어서 나누어질 수 없도록 만든것 (무슨말인지 잘 모르겠... 나중에 DB랑 SQL 배울때 나올까 싶어서 일단 적었음)


## SQL
__SQL(구조적 쿼리 언어)__ : 관계형 데이터베이스(RDBMS)에 정보를 저장하고 처리하기 위한 프로그래밍 언어
-SQL문을 사용하여 데이터베이스에 정보를 저장, 업데이트, 제거 및 검색을 할 수 있다 또한 데이터 베이스 성능을 유지 관리하고 최적화 하는데 SQL을 사용할 수도 있다

- SQL 테이블 = RDBMS 테이블과 같은 내용

---

## ORM 작동 원리

SQLAlchemy : 파이썬 개발자가 데이터 베이스와 상호작용 할 수 있도록 돕는 강력하고 유연한 ORM 라이브러리
- 대표적인 파이썬 ORM 라이브러리 = SQLAlchemy, Django

- 데이터베이스는 엑셀처럼 표(Table)로 되어있고, 파이썬은 객체로(Object)로 되어있는데 이 모양차이를 극복하기위해 사용됨
- DB전체를 가져오는게 아니라 연관되있는 부분을 확인하고 변환한다
[예시링크](https://clice.tistory.com/entry/DB-ORM%EC%9D%98-%ED%8A%B9%EC%A7%95%EA%B3%BC-SQL%EC%97%90%EC%84%9C-ORM%EC%9C%BC%EB%A1%9C-%EB%B3%80%ED%99%98-%EC%98%88%EC%A0%9CSQLAlchemy-Django-ORM#google_vignette)
  

## OPM의 장단점
장점
-유지보수가 용이하다 : ORM을 사용하면 데이터베이스 스키마 변경시 소스코드의 변경을 최소화 할 수 있다
-코드의 가독성 향상 : ORM은 객체지향프로그래밍 언어의 문법과 매서드를 활용하므로, 코드의 가독성이 높다. SQL쿼리를 직접 작성하는 것보다 메서드를 활용하는게 직관적이고 이해하기 쉽다

단점
- 데이터베이스와 바로 연결하는 것보다 초기설정이 더 많아지거나 복잡해질수 있음
- 내부 동작에 대한 충분한 이해가 없는경우 문제 해결이 힘듬
- 데이터베이스에 직접 쿼리문을 보내는 것이 아니기 때문에 성능 저하가 발생함




스키마 : 데이터베이스의 구조와 제약조건에 관해 전반적인 명세를 기술한것
- 개체의 특성을 나타내는 속성(attribute)
- 속성들의 집합으로 이루어진 개체(entitiy)
- 개체 사이에 존재하는 관계(relation)에 대한 정의
- 이들이 유지해야할 제약조건

SQL대신 PYTHON을 쓰는 이유 : DB를 다루는 방식을 테이블 중신에서 객체중심으로 바꾸기위해서
- python으로 쓰는게 더 직관적임 ex) post.author.name
  ```
  SELECT u.name
  FROM posts p
  JOIN users u ON p.user_id = u.id
  WHERE p.id = i;
  ```
  -실수 줄이기(안정성) : orm은 속성이름틀리면 바로 에러/ 관계가 코드로 정의됨 -> 런타임 전에 잡히는 오류가 많아짐
  -DB가 바뀌어도 코드 변경 최소화 : DB가 뭐든 Python 코드는 그대로/ 내부에서 ORM이 BD에 맞는 SQL을 만들어줌
  -유지보수, 협업에 강함
  
  
